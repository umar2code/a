[{"id":"1","label":"azuredeploy.json","type":"json","jsonData":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"newStorageAccountName":{"type":"string","metadata":{"description":"This is the name of the your storage account"}},"vmDnsName":{"type":"string","metadata":{"description":"This is the unique DNS name of the for the public IP for your VM"}},"adminUsername":{"type":"string","metadata":{"description":"This is the username you wish to assign to your VMs admin account"}},"adminPassword":{"type":"securestring","metadata":{"description":"This is the password you wish to assign to your VMs admin account"}},"mySqlPassword":{"type":"securestring","metadata":{"description":"Password for your mySQL account"}},"vmSize":{"type":"string","metadata":{"description":"Size of VM"}}},"variables":{"nicName":"VMNic","addressPrefix":"10.0.0.0/16","imagePublisher":"Canonical","imageVersion":"latest","imageSKU":"14.04.2-LTS","imageOffer":"UbuntuServer","subnetName":"Subnet-1","subnetPrefix":"10.0.0.0/24","storageAccountType":"Standard_LRS","publicIPAddressName":"publicIP","publicIPAddressType":"Dynamic","vmStorageAccountContainerName":"vhds","vmName":"[parameters('vmDnsName')]","virtualNetworkName":"WPVNET","vnetID":"[resourceId('Microsoft.Network/virtualNetworks',variables('virtualNetworkName'))]","subnetRef":"[concat(variables('vnetID'),'/subnets/',variables('subnetName'))]"},"resources":[{"type":"Microsoft.Storage/storageAccounts","name":"[parameters('newStorageAccountName')]","apiVersion":"2015-05-01-preview","location":"[resourceGroup().location]","properties":{"accountType":"[variables('storageAccountType')]"}},{"apiVersion":"2015-05-01-preview","type":"Microsoft.Network/publicIPAddresses","name":"[variables('publicIPAddressName')]","location":"[resourceGroup().location]","properties":{"publicIPAllocationMethod":"[variables('publicIPAddressType')]","dnsSettings":{"domainNameLabel":"[parameters('vmDnsName')]"}}},{"apiVersion":"2015-05-01-preview","type":"Microsoft.Network/virtualNetworks","name":"[variables('virtualNetworkName')]","location":"[resourceGroup().location]","properties":{"addressSpace":{"addressPrefixes":["[variables('addressPrefix')]"]},"subnets":[{"name":"[variables('subnetName')]","properties":{"addressPrefix":"[variables('subnetPrefix')]"}}]}},{"apiVersion":"2015-05-01-preview","type":"Microsoft.Network/networkInterfaces","name":"[variables('nicName')]","location":"[resourceGroup().location]","dependsOn":["[concat('Microsoft.Network/publicIPAddresses/', variables('publicIPAddressName'))]","[concat('Microsoft.Network/virtualNetworks/', variables('virtualNetworkName'))]"],"properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"privateIPAllocationMethod":"Dynamic","publicIPAddress":{"id":"[resourceId('Microsoft.Network/publicIPAddresses',variables('publicIPAddressName'))]"},"subnet":{"id":"[variables('subnetRef')]"}}}]}},{"apiVersion":"2015-05-01-preview","type":"Microsoft.Compute/virtualMachines","name":"[variables('vmName')]","location":"[resourceGroup().location]","dependsOn":["[concat('Microsoft.Storage/storageAccounts/', parameters('newStorageAccountName'))]","[concat('Microsoft.Network/networkInterfaces/', variables('nicName'))]"],"properties":{"hardwareProfile":{"vmSize":"[parameters('vmSize')]"},"osProfile":{"computername":"[variables('vmName')]","adminUsername":"[parameters('adminUsername')]","adminPassword":"[parameters('adminPassword')]"},"storageProfile":{"imageReference":{"publisher":"[variables('imagePublisher')]","offer":"[variables('imageOffer')]","sku":"[variables('imageSKU')]","version":"[variables('imageVersion')]"},"osDisk":{"name":"osdisk1","vhd":{"uri":"[concat('http://',parameters('newStorageAccountName'),'.blob.core.windows.net/',variables('vmStorageAccountContainerName'),'/','osdisk1.vhd')]"},"caching":"ReadWrite","createOption":"FromImage"}},"networkProfile":{"networkInterfaces":[{"id":"[resourceId('Microsoft.Network/networkInterfaces',variables('nicName'))]"}]}}},{"type":"Microsoft.Compute/virtualMachines/extensions","name":"[concat(variables('vmName'),'/newuserscript')]","apiVersion":"2015-05-01-preview","location":"[resourceGroup().location]","dependsOn":["[concat('Microsoft.Compute/virtualMachines/', variables('vmName'))]"],"properties":{"publisher":"Microsoft.Azure.Extensions","type":"CustomScript","typeHandlerVersion":"2.0","autoUpgradeMinorVersion":true,"settings":{"fileUris":["https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/wordpress-single-vm-ubuntu/install_wordpress.sh"]},"protectedSettings":{"commandToExecute":"[concat('sh install_wordpress.sh ', parameters('mySqlPassword'))]"}}}]}},{"id":"2","label":"azuredeploy.parameters.json","type":"json","jsonData":{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#","contentVersion":"1.0.0.0","parameters":{"newStorageAccountName":{"value":"GEN-UNIQUE-8"},"vmDnsName":{"value":"GEN-UNIQUE"},"adminUsername":{"value":"azureuser"},"adminPassword":{"value":"GEN-PASSWORD"},"mySqlPassword":{"value":"GEN-PASSWORD"},"vmSize":{"value":"Standard_D2"}}}},{"id":3,"label":"install_wordpress.sh","type":"html","jsonData":"#!/bin/bash\napt-get -y update\nlogger \"Installing WordPress\"\n# Set up a silent install of MySQLdbpass=$1\nexport DEBIAN_FRONTEND=noninteractiveecho mysql-server-5.6 mysql-server/root_password password $dbpass | debconf-set-selectionsecho mysql-server-5.6 mysql-server/root_password_again password $dbpass | debconf-set-selections\n# Install the LAMP stack and WordPressapt-get -y install apache2 mysql-server php5 php5-mysql wordpress\n# Setup WordPressgzip -d /usr/share/doc/wordpress/examples/setup-mysql.gzbash /usr/share/doc/wordpress/examples/setup-mysql -n wordpress localhost\nln -s /usr/share/wordpress /var/www/html/wordpressmv /etc/wordpress/config-localhost.php /etc/wordpress/config-default.php\n# Restart Apacheapachectl restart\nlogger \"Done installing WordPress; open /wordpress to configure\""},{"id":4,"label":"metadata.json","type":"json","jsonData":{"itemDisplayName":"Deploy a single-VM WordPress to Azure","description":"This template deploys a complete LAMP stack, then installs and initializes WordPress. Once the deployment is finished, you need to go to http://fqdn.of.your.vm/wordpress/ to finish the configuration, create an account, and get started with WordPress.","summary":"Deploy a single-VM WordPress to Azure","githubUsername":"tomconte","dateUpdated":"2015-04-28"}},{"id":5,"label":"README.md","type":"html","jsonData":"# Deploy a single-VM WordPress to Azure\n\n<a href=\"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fwordpress-single-vm-ubuntu%2Fazuredeploy.json\" target=\"_blank\">\n    <img src=\"http://azuredeploy.net/deploybutton.png\"/>\n</a>\n<a href=\"http://armviz.io/#/?load=https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fwordpress-single-vm-ubuntu%2Fazuredeploy.json\" target=\"_blank\">\n    <img src=\"http://armviz.io/visualizebutton.png\"/>\n</a>\n\nThis template deploys a complete LAMP stack, then installs and initializes WordPress.\n\nOnce the deployment is finished, you need to go to http://fqdn.of.your.vm/wordpress/ to finish the configuration, create an account, and get started with WordPress."}]